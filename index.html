<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
    <style>
        body {
            background-image: url(https://img.freepik.com/vector-gratis/fondo-maquillaje-realista_23-2149373139.jpg?w=1060&t=st=1702344988~exp=1702345588~hmac=7a9794e6cae562e84df7f2e08c608e110901d8e4e5d68f2c767ab2eb775c5dc1);
            background-position: center;
            background-size: cover;
            font-family: Arial, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .contenedor {
            background: rgba(255, 69, 58, 0.5);
            width: 45%;
            max-width: 555px;
            margin: auto;
            padding: 25px 65px;
            margin-top: 45px;
            padding-bottom: 20px;
            border-radius: 3px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        h2 {
            text-align: center;
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        label {
            margin-top: 10px;
        }

        input {
            margin-bottom: 10px;
            padding: 5px;
        }

        button {
            width: 15%;
            font-family: sans-serif;
            outline: none;
            background: #000000;
            font-size: 12px;
            border: none;
            color: #fff;
            padding: 8px 0;
            cursor: pointer;
        }

        button:hover {
            background-color: #000000;
        }

        #tablaRegistros {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        #tablaRegistros th,
        #tablaRegistros td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        #tablaRegistros th {
            background-color: #000000;
            color: white;
        }

        #tabla {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        #tabla th,
        #tabla td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        #tabla th {
            background-color: #000000;
            color: white;
        }
    </style>
</head>

<body>
    <div class="contenedor">
        <h2>REGISTRO DE PRODUCTOS</h2>

        <form id="crud-form">
            <label for="producto">PRODUCTO:</label>
            <input type="text" id="producto" placeholder="Ingrese el nombre del producto">
            <label for="marca">MARCA:</label>
            <input type="text" id="marca" placeholder="Ingrese la marca">
            <label for="precio">PRECIO:</label>
            <input type="number" id="precio" placeholder="Ingrese el precio">
            <label for="tipo">TIPO:</label>
            <input type="text" id="tipo" placeholder="Ingrese el tipo">
            <label for="cantidad">CANTIDAD:</label>
            <input type="number" id="cantidad" placeholder="Ingrese la cantidad">
            <button type="submit" onclick="crearRegistro()">AÃ‘ADIR</button>
        </form>

        <!-- Tabla para mostrar los registros -->
        <table id="tablaRegistros">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>PRODUCTO</th>
                    <th>MARCA</th>
                    <th>PRECIO</th>
                    <th>TIPO</th>
                    <th>CANTIDAD</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getDatabase, ref, push, onValue, remove, update } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "TuApiKey",
            authDomain: "TuDominio.firebaseapp.com",
            databaseURL: "https://TuProyecto.firebaseio.com",
            projectId: "TuProyecto",
            storageBucket: "TuProyecto.appspot.com",
            messagingSenderId: "TuSenderId",
            appId: "TuAppId",
            measurementId: "TuMeasurementId"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        document.getElementById("crud-form").addEventListener("submit", function (event) {
            event.preventDefault();
            crearRegistro();
        });

        function crearRegistro() {
            const producto = document.getElementById("producto").value;
            const marca = document.getElementById("marca").value;
            const precio = document.getElementById("precio").value;
            const tipo = document.getElementById("tipo").value;
            const cantidad = document.getElementById("cantidad").value;

            push(
                ref(database, 'angelesgarcia'),
                {
                    producto: producto,
                    marca: marca,
                    precio: precio,
                    tipo: tipo,
                    cantidad: cantidad
                }
            );
        }

        function leerRegistro() {
            const databaseRef = ref(database, 'angelesgarcia');
            const tablaRegistros = document.getElementById('tablaRegistros');
            const tbody = tablaRegistros.querySelector('tbody');

            onValue(databaseRef, (snapshot) => {
                const data = snapshot.val();

                tbody.innerHTML = '';

                for (const registroId in data) {
                    const registro = data[registroId];
                    const newRow = tbody.insertRow();

                    const idCell = newRow.insertCell(0);
                    idCell.textContent = registroId;

                    const productoCell = newRow.insertCell(1);
                    productoCell.textContent = registro.producto;

                    const marcaCell = newRow.insertCell(2);
                    marcaCell.textContent = registro.marca;

                    const precioCell = newRow.insertCell(3);
                    precioCell.textContent = registro.precio;

                    const tipoCell = newRow.insertCell(4);
                    tipoCell.textContent = registro.tipo;

                    const cantidadCell = newRow.insertCell(5);
                    cantidadCell.textContent = registro.cantidad;
                }

                tablaRegistros.style.display = 'table';
            });
        }
    </script>
</body>

</html>
